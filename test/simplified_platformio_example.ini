# Simplified test configuration - just the essentials

# Essential: Unit tests with coverage
[env:test]
platform = native
build_flags = 
	-std=gnu++17
	-D UNIT_TESTING
	-D CLARITY_DEBUG
	-I include
	-I test
	-I test/mocks
	-I test/utilities
	--coverage
	-fprofile-arcs
	-ftest-coverage
	-g3
	-O0
lib_deps = 
	throwtheswitch/Unity @ ^2.5.2
test_framework = unity
test_filter = test_*
build_src_filter = 
	+<*>
	+<../test/mocks>
	+<../test/utilities>
	+<../test/integration>  # Include both unit and integration
	-<../test/wokwi>

# Alternative: Separate unit and integration if needed
[env:test-unit]
extends = env:test
build_src_filter = 
	+<*>
	+<../test/mocks>
	+<../test/utilities>
	-<../test/integration>
	-<../test/wokwi>

[env:test-integration]  
extends = env:test
test_filter = test_*integration*
build_src_filter = 
	+<*>
	+<../test/mocks>
	+<../test/utilities>
	+<../test/integration>
	-<../test/wokwi>