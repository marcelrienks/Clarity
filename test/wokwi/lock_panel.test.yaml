version: 1
name: "Lock Panel Integration - Enhanced"
description: "Basic startup validation without DIP switch dependencies"
timeout: 25000ms

steps:
  # Wait for simulation start
  - delay: 2000ms
  
  # Initialize baseline state
  - set-control:
      part-id: sw1
      control: value
      value: 0  # All switches OFF
  - delay: 1000ms
  
  # Verify lock sensor initialization
  - wait-serial: "Initializing lock sensor on GPIO 27"
  - delay: 500ms
  
  # Verify lock sensor reading
  - wait-serial: "Lock sensor reading: disengaged"
  - delay: 500ms
  
  # Verify lock trigger initialized to INACTIVE
  - wait-serial: "Trigger lock_state initialized to INACTIVE based on GPIO state"
  - delay: 500ms
  
  # Wait for oil panel (lock panel switching doesn't work in Wokwi)
  - wait-serial: "Loading OEM oil panel with pressure and temperature gauges"
  - delay: 2000ms
  
  # Test sensor data updates (DIP switch triggers don't work in Wokwi simulation)
  - set-control:
      part-id: pot1
      control: value
      value: 350  # Some pressure reading
  - delay: 1000ms
  - set-control:
      part-id: pot2
      control: value
      value: 650  # Some temperature reading
  - delay: 2000ms