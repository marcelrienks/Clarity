version: 1
name: "Key Present Panel Switch - Enhanced"
description: "Key present trigger validation with panel switching"
timeout: 40000ms

steps:
  # Wait for simulation start
  - delay: 2000ms
  
  # Initialize baseline state
  - set-control:
      part-id: sw1
      control: value
      value: 0  # All switches OFF
  - delay: 3000ms
  - wait-serial: "Oil panel"
  - delay: 2000ms
  
  # Activate key present trigger
  - set-control:
      part-id: sw1
      control: value
      value: 1  # DIP switch #1 ON (Key Present - GPIO 25)
  - delay: 2000ms
  - wait-serial: "Key panel"
  - delay: 2000ms
  
  # Return to oil panel
  - set-control:
      part-id: sw1
      control: value
      value: 0  # Key present OFF
  - delay: 2000ms
  - wait-serial: "Oil panel"
  - delay: 1000ms